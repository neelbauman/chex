-*- mode:org; -*-
file://~/org/agenda.org

* TDDの流れ
1. 失敗するテストを書く（ほしい挙動をリストする）
2. テストを実行して失敗することを確認
3. テストを成功させる最低限の実装を書く（クソコードでもいいからテストを通過させる）
4. テストを実行して成功することを確認
5. テストがオチないようにしながら実装をリファクタリングする

** 格言１
はじめから複雑な世界を想像するよりは、まずはとても単純な世界を仮定して始めて、うまく行かなかったら複雑化させれたほうが良い。
*** 注釈
- とても単純な世界だと思ってやってみることのフットワークは軽くなくてはならない。
- どうやって複雑化させるのが良いのかはまた別の話。
** 格言２
ゼロからいきなり最良を実現するよりは、最低限のものを最良へ向けて改良していくほうが簡単だ。
** オリジナル要素
*** Jupyter Lab でSKETCHを書きながら世界のことを眺めてテストの設計を考えることは良いことでは？
*** テストを Jupyter Lab で書いちゃってもいいしね。

* 課題事項
** 数学記法の形態素解析
** ソースがSVGだったらMyScriptを利用してLaTeX記法に変換できる。（画像のラベルセットへの置換）
** LaTeXコマンドをパースするのは多分簡単
** 数学記法の形態素解析がうまく実装できなかったときの保険的代替案を考えておく。

* CRAWLER
#+begin_src plantuml :file static/img/crawler_activity.svg
start

partition "initialize" {
:ドメインのindexを探す;
}

if (indexがある) then (yes)
:indexをロードする;
else (no)
:LPへ飛ぶ;
endif

#+end_src

#+RESULTS:
[[file:static/img/crawler_activity.svg]]

#+begin_src plantuml
main -> CRAWLER: initialize
activate CRAWLER


#+end_src

* CRAWLERの実装 [0/4]
** TODO コア機能（MINER）のプロトタイピング（ローカルでの挙動） [23%]
*** TODO データ取得 [100%]
**** GREEN Crawlerオブジェクトを作成できる
    :LOGBOOK:
    - State "GREEN"      from "TOTEST"     [2023-08-27 日 10:49]
    - State "TOTEST"     from              [2023-08-27 日 10:48]
    :END:
**** GREEN 初期化が適切にできる
    :LOGBOOK:
    - State "GREEN"      from "TOTEST"     [2023-08-27 日 11:00]
    - State "TOTEST"     from              [2023-08-27 日 10:48]
    :END:
**** GREEN [[https://math.jp/wiki/%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%9A%E3%83%BC%E3%82%B8][Mathpedia]]にRequestでアクセスできる
    :LOGBOOK:
    - State "GREEN"      from "TOTEST"     [2023-08-27 日 11:01]
    - State "TOTEST"     from              [2023-08-23 水 14:54]
    :END:
*** TODO ターゲットページに過去に訪問したことがあるかを調べる [100%]
**** GREEN ターゲットのデータファイルが存在するかどうかを確認する
     :LOGBOOK:
     - State "GREEN"      from "TOTEST"     [2023-08-27 日 18:18]
     - State "TOTEST"     from              [2023-08-27 日 11:05]
     :END:
**** GREEN 存在する場合、jsonを読み込む。存在しない場合、新規ファイルを作成する。
    :LOGBOOK:
    - State "GREEN"      from "TOTEST"     [2023-08-27 日 18:18]
    - State "TOTEST"     from              [2023-08-25 金 15:28]
    :END:
*** TOTEST htmlに前回の訪問から更新が無いかをチェックしてeditedフラグを更新できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-25 金 15:28]
    :END:
*** TOTEST latest, countを更新できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-25 金 15:29]
    :END:
*** TOTEST すべてのhrefとその訪問回数の組をリストに抽出できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-27 日 11:03]
    :END:
*** TOTEST HTMLをjsonに保存できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:07]
    :END:
*** TOTEST HTMLからマークアップを削除して記事情報だけを抽出できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:08]
    :END:
*** TOTEST 記事情報を保存できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:09]
    :END:
*** TOTEST 記事情報からLaTeX記法を抽出できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:04]
    :END:
*** TOTEST LaTeX記法のみをまとめて保存できる
    :LOGBOOK:
    - State "TOTEST"     from "WAIT"       [2023-08-23 水 15:09]
    :END:
** TODO Webページ構造インデックス作成・表示機能（OFFICER） [0%]
*** TOTEST 対象ドメインに存在するHTMLのページのインデックスを作成できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:23]
    :END:
*** TOTEST ページ間のリンクのテーブルを作れる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:25]
    :END:
*** TOTEST リンクテーブルをもとに、リンクグラフを作って表示できる
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:27]
    :END:
** TODO 外部ストレージへの保存 [0%]
*** TOTEST S3へのログイン
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:13]
    :END:
*** TOTEST S3へのアップロード
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:11]
    :END:
*** TOTEST S3からのファイル取得
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:11]
    :END:
*** TOTEST 直接S3へソースを保存
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:12]
    :END:
** TODO デーモン化 [0%]
*** TOTEST リモートサーバ上で稼働することを確認
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:15]
    :END:
*** TOTEST 更新指示で対象サイトを訪問してソースの更新をする
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:16]
    :END:
*** TOTEST 定期的に対象サイトを訪問してソースの更新をする
    :LOGBOOK:
    - State "TOTEST"     from              [2023-08-23 水 15:17]
    :END:
* PARSERの実装
